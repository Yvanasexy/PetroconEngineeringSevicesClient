<!doctype html>
<html lang="en">
  <head>
    <title>Test Page</title>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.2/dist/css/bootstrap.min.css" integrity="sha384-xOolHFLEh07PJGoPkLv1IbcEPTNtaed2xpHsD9ESMhqIYd0nLMwNLD69Npy4HI+N" crossorigin="anonymous">

    <!-- Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans:ital,wght@0,400;0,500;0,600;0,700;0,800;0,900;1,400;1,500;1,600;1,700;1,800;1,900&family=Open+Sans:ital,wght@0,300;0,400;0,500;0,600;0,700;0,800;1,300;1,400;1,500;1,600;1,700;1,800&display=swap" rel="stylesheet">

    <!-- Google Icons -->
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Outlined" rel="stylesheet">

    <!-- External CSS -->
    <link rel="stylesheet" href="styles/styles.css">
    <link rel="stylesheet" href="styles/astyles.css">
  </head>
  <body>
    <main>
      <!-- Content -->
      <nav class="nav-tab-container border-bottom">
          <ul class="nav-tab">
              <li class="nav-tab-item active">
                <button class="link-btn" data-toggle="custom-tab" data-target="#tab1">Gantt Chart</button>
              </li>
              <li class="nav-tab-item">
                <button class="link-btn" data-toggle="custom-tab" data-target="#tab2">Resources</button>
              </li>
              <li class="nav-tab-item">
                <button class="link-btn" data-toggle="custom-tab" data-target="#tab3">People</button>
              </li>
          </ul>

          <button type="button" class="btn icon-btn" data-toggle="slide" data-target="#projectInfo">
              <span class="material-icons-outlined">info</span>
          </button>
      </nav>

      <style>

        .custom-tab-container {
          display: flex;
          position: relative;
        }

        .custom-tab-content {
          display: none;
          width: 100%;
          min-height: 100vh;
        }

        .custom-tab-content.show {
          display: block;
        }

        #tab1 {
          background-color: rgb(255, 114, 114);
        }

        #tab2 {
          background-color: rgb(70, 70, 255);
        }

        #tab3 {
          background-color: rgb(166, 78, 255);
        }
      </style>

      <div class="custom-tab-container">

        <!-- Timeline Slide -->
        <div class="slide" id="timeline" data-side="left">
          <!-- slide -->
          <div class="slide-container">
            <div class="slide-content">
              <table class="mesa">
                <thead class="mesa-header">
                  <th scope="col">#</th>
                  <th scope="col" class="taskCell">Task</th>
                  <th scope="col">Start</th>
                  <th scope="col">Due</th>
                  <th scope="col">Status</th>
                  <th scope="col" class="action-cell">
                    <button class="btn icon-btn" data-dismiss="slide">
                      <span class="material-icons">navigate_before</span>
                    </button>
                  </th>
                </thead>

                <tbody>
                  <tr>
                    <th scope="row">1</th>
                    <td class="taskCell">Procurement</td>
                    <td>dd/mm/YYYY</td>
                    <td>dd/mm/YYYY</td>
                    <td>Done</td>
                    <td class="action-cell">
                      <i class="fa fa-trash" aria-hidden="true"></i>
                      <i class="fa-solid fa-ellipsis-vertical"></i>
                    </td>
                  </tr>

                  <tr>
                    <th scope="row">2</th>
                    <td class="taskCell">Tool Box Meeting</td>
                    <td>dd/mm/YYYY</td>
                    <td>dd/mm/YYYY</td>
                    <td>Done</td>
                    <td class="action-cell">
                      <i class="fa fa-trash" aria-hidden="true"></i>
                      <i class="fa-solid fa-ellipsis-vertical"></i>
                    </td>
                  </tr>

                  <tr>
                    <th scope="row">3</th>
                    <td class="taskCell">Actual visit at site for measurementActual visit at site for measurementActual visit at site for measurementActual visit at site for measurement</td>
                    <td>dd/mm/YYYY</td>
                    <td>dd/mm/YYYY</td>
                    <td>Done</td>
                    <td class="action-cell">
                      <i class="fa fa-trash" aria-hidden="true"></i>
                      <i class="fa-solid fa-ellipsis-vertical"></i>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
        </div>

        <div class="custom-tab-content show" id="tab1">
          <button type="button" class="btn icon-btn" data-toggle="slide" data-target="#timeline">
            <span class="material-icons">timeline</span>
          </button>
          <p class="lead">Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nunc tempor enim turpis, non volutpat ligula auctor nec. Proin eget sem ante. Curabitur lacinia lacus eget turpis lacinia consectetur. Etiam accumsan placerat lacus, efficitur elementum sem condimentum quis. Morbi fermentum dignissim arcu at venenatis. In sed neque imperdiet, ullamcorper odio ut, posuere arcu. Nullam sed placerat nibh, eget ornare justo. Donec dapibus vestibulum augue a semper. Ut ornare magna consequat diam lacinia, vitae fringilla neque tincidunt. In hac habitasse platea dictumst.</p>
        </div>

        <div class="custom-tab-content" id="tab2">
          Suspendisse sed vestibulum ante. Aliquam pharetra, tortor nec sollicitudin accumsan, libero est varius ex, vitae suscipit enim mauris in ex. Aenean varius molestie nisi, in tristique mi sollicitudin eu. Etiam ornare dignissim malesuada. Ut maximus felis nec urna semper, at interdum diam ultricies. Phasellus vel magna nulla. Nam molestie risus est, sit amet viverra nisi congue ultrices. Sed diam urna, viverra ut orci in, semper condimentum lacus. Donec a tellus sem. Aliquam eget ipsum posuere, ultrices dolor nec, porta nisi. Nam at tellus ex. Vestibulum finibus lacus id rutrum ultrices. Nulla vitae lorem sit amet odio condimentum placerat consequat ac urna.
        </div>

        <div class="custom-tab-content" id="tab3">
          Nulla imperdiet risus neque, elementum faucibus ante condimentum in. Nunc ornare malesuada est quis volutpat. Fusce nec auctor nisi. Sed laoreet interdum nisi, vitae placerat lacus fermentum et. Proin malesuada quam ac est efficitur malesuada. Suspendisse potenti. Vestibulum ante ipsum primis in faucibus orci luctus et ultrices posuere cubilia curae; Nulla ac pulvinar odio, quis mollis quam. In et ullamcorper nisl. In hac habitasse platea dictumst. Donec sagittis tincidunt turpis, sed efficitur leo vehicula nec. Vestibulum ante dui, blandit at ullamcorper nec, facilisis ut dui. Phasellus metus est, malesuada et facilisis ac, rhoncus ut augue. Nam eget venenatis neque, eget maximus arcu. Nulla sollicitudin lectus eu consequat egestas.
        </div>

        <!-- Details Slide -->
        <!-- <button class="btn action-btn">Slide here</button> -->
        <div class="slide" id="projectInfo" data-side="right">
          <!-- slide -->
          <div class="slide-container">
            <div class="slide-content">
              <div class="slide-header">
                <button class="btn icon-btn" data-dismiss="slide">
                  <span class="material-icons">navigate_next</span>
                </button>
                <h2 class="slide-title">Details</h2>
                <div>
                  <button class="btn link-btn show" data-toggle="form" data-action="edit" data-target="#projectDetailForm">
                    Edit
                  </button>
                  <button class="btn link-btn" type="submit" form="#projectDetailForm" data-toggle="form" data-action="submit" id="projectDetailSubmit" data-target="#projectDetailForm">
                    Done
                  </button>
                </div>
              </div>

              <div class="slide-body">
                <form action="" id="projectDetailForm">

                  <h3>General</h3>

                  <div class="form-input-group display">
                    <label for="">Name of Client</label>
                    <p>Yvana Eunice Magno</p>
                    <input type="text" value="Yvana Eunice Magno" autofocus>
                  </div>

                  <div class="form-input-group display">
                    <label for="">Building no.</label>
                    <p>Building 1, 2, 3</p>
                    <input type="text" value="Building 1, 2, 3">
                  </div>

                  <div class="form-input-group display">
                    <label for="">Work Description</label>
                    <p>Conduct preventive maintenance for Gasline from Manifold to distribution line up to burnes equipment.</p>
                    <textarea name="" id="">Conduct preventive maintenance for Gasline from Manifold to distribution line up to burnes equipment.</textarea>
                  </div>

                  <h3>Project</h3>

                  <div class="form-input-group display">
                    <label for="">Purchase Order #</label>
                    <p>20221526</p>
                    <input type="number" value="20221526">
                  </div>

                  <div class="form-input-group display">
                    <label for="">Date of Award</label>
                    <p>11/26/2022</p>
                    <input type="date" value="11/26/2022">
                  </div>

                  <div class="form-input-group display">
                    <label for="">Location</label>
                    <p>Rosario, Batangas</p>
                    <input type="text" value="Rosario, Batangas">
                  </div>

                </form>
              </div>

              <div class="slide-footer">
                  footer
              </div>

            </div>

          </div>
        </div>

      </div>
        
      <!-- End of content -->
    </main>

    <!-- <button id="btn1">Animate height</button>
    <button id="btn2">Reset height</button>

    <div id="box" style="background:#98bf21;height:100px;width:100px;margin:6px; z-index: 2000;"></div> -->

    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>

    <!-- Font Awesome -->
    <script src="https://kit.fontawesome.com/4de3040dc0.js" crossorigin="anonymous"></script>

    <!-- External JS -->
    <script src="scripts/index.js"></script>

    <!-- <style>
      #box {
        position: fixed;
        right: 0;
        bottom: 0;
      }
    </style> -->

    <script>

      // $("#btn1").click(function(){
      //   $("#box").animate({
      //     height: "300px",
      //     right: $("body").css("margin-right")
      //   });
      // });
      // $("#btn2").click(function(){
      //   $("#box").animate({height: "100px"});
      // });

      // $(".slide[data-side='right'] .slide-container").css("right", $(".slide[data-side='right'] .slide-container").width());

      // Try scripts here

      console.log("Window height");
      console.log($(window).height());
      console.log("Nav tab height");
      console.log($(".nav-tab-container").height());
      console.log(($(window).height() - $(".nav-tab-container").height()) + "px");

      function initializeSlide() {
        $($(".slide")).each(function (index, element) {
          console.log($(element));

          switch ($(element).data("side")) {
            case "left":
              console.log("left slide found");
              $(".slide[data-side='left'] .slide-container").css({
                "height": $(window).height() - $(".nav-tab-container").height() + "px"
              });
              break;
          
            case "right":
              console.log("right slide found");
              $(".slide[data-side='right'] .slide-container").css( {
                "height": $(window).height() - $(".nav-tab-container").height() + "px",
                "right": $("body").css("margin-right")
              });
              break;

            default:
              console.log("initializeSlide: Error! Invalid side.");
              break;
          }
        });
      }

      initializeSlide();

      $(window).on("resize", () => {
        initializeSlide();
      });

      $(".slide-container").on("animationend", function (e) {
        console.log(e.originalEvent.animationName);

        if (e.originalEvent.animationName === "slide-out-right" || 
            e.originalEvent.animationName === "slide-out-left") { 
          console.log("Closing slide");
          $(".slide-container").removeClass("slide-out-right");
          $(".slide-container").removeClass("slide-out-left");
          $(".slide").removeClass("active");
          $("body").removeClass("slide-open");
        }
      });

      $("button[data-toggle]").on("click", function (e) {
        // Button
        const btnCLicked = $(this);

        // Toggle data
        const toggleElement = btnCLicked.data("toggle");

        // Target data
        const targetElementId = btnCLicked.data("target");
        const targetSlide = $(targetElementId);
        
        switch (toggleElement) {
            case "slide":
              if ($("body").hasClass("slide-open")) {
                // Hides slide
                console.log("hide slide");
                const slideSide = targetSlide.data("side");
                const targetElementSelector = targetElementId + "[data-side='" + slideSide + "'] .slide-container";

                if (slideSide === "right") {
                  $(targetElementSelector).addClass("slide-out-right");
                } else if (slideSide === "left") {
                  $(targetElementSelector).addClass("slide-out-left");
                }

              } else {
                // Show slide
                console.log("show slide");
                $(targetElementId).addClass("active");
                $("body").addClass("slide-open");
              }

              break;

            case "form":

              const form = $(btnCLicked.data("target"));

              switch (btnCLicked.data("action")) {

                case "edit":
                  console.log("Edit form");
                  console.log(btnCLicked.data("target"));

                  const submitFormBtn = $("button[data-toggle='form'][data-action='submit'][data-target='" + btnCLicked.data("target") + "']");
                  
                  btnCLicked.addClass("hide");
                  btnCLicked.removeClass("show");

                  submitFormBtn.removeClass("hide");
                  submitFormBtn.addClass("show");

                  form.addClass("form-open");
                  form.find(".form-input-group").removeClass("display");
                  break;

                case "submit":
                  console.log("Save form");

                  btnCLicked.removeClass("show");
                  btnCLicked.addClass("hide");

                  $("button[data-toggle='form'][data-action='edit'][data-target='" + btnCLicked.data("target") + "']").removeClass("hide");
                  $("button[data-toggle='form'][data-action='edit'][data-target='" + btnCLicked.data("target") + "']").addClass("show");
                  
                  form.removeClass("form-open");
                  form.find(".form-input-group").addClass("display");
                  break;
              }

              
              break;
        }
      });

      $("button[data-dismiss]").on("click", function (e) {
        const btnCLicked = $(this);
        const dismissElement = $(this).data("dismiss");
        switch (dismissElement) {
            case SLIDE:
              console.log("Dismiss slide");

              // Active slide element
              const activeSlide = $(".slide.active");

              // Active slide side
              const slideSide = activeSlide.data("side");
              console.log(slideSide);

              if (slideSide === "right") {
                console.log("Adding slide out right");
                activeSlide.find(".slide-container").addClass("slide-out-right");
              } else if (slideSide === "left") {
                console.log("Adding slide out left");
                activeSlide.find(".slide-container").addClass("slide-out-left");
              } 

              break;
        }
      });

      $("textarea").on("input", function() {
        this.style.minHeight = "1rem";
        this.style.height = "auto";
        this.style.height = (this.scrollHeight) + "px";
        this.style.overflowY = "hidden";
      });

    </script>
  </body>
</html>